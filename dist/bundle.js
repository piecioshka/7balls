!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=20)}([function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o="rgb(0,0,0)",i="rgb(255,255,255)",a=n(3),s=n(1);function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:150,r=function(e,t,n,r,o){var a=e.add.graphics(t,n);return a.beginFill(i,.5),a.drawRect(0,0,r,o),a.endFill(),a}(e,0,e.height/2-n/2,e.width,n);return r.alpha=0,e.time.events.add(Phaser.Timer.SECOND/4,function(){e.add.tween(r).to({alpha:1},Phaser.Timer.SECOND/2,Phaser.Easing.Linear.None,!0)},this),e.time.events.add(t-Phaser.Timer.SECOND/2,function(){e.add.tween(r).to({alpha:0},Phaser.Timer.SECOND/2,Phaser.Easing.Linear.None,!0)},this),r}function c(e,t,n,i){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],u=e.add.text(t,n,i);return u.fill="#fff",u.font="Tahoma",u.setShadow(0,0,o,3),(a=u.anchor).setTo.apply(a,r(s)),u}function l(e,t,n,r,o){var i=c(e,t,n,r,o);return i.font="Saiyan-Sans",i}function f(e,t){var n=t.text,r=t.lifespan,o=void 0===r?2*Phaser.Timer.SECOND:r,i=t.fontSize,a=void 0===i?40:i,s=t.cb,u=void 0===s?function(){return null}:s,l=c(e,e.width/2,e.height/2,n,[.5,.5]);return l.alpha=0,l.fontSize=a,e.time.events.add(Phaser.Timer.SECOND/4,function(){e.add.tween(l).to({alpha:1},Phaser.Timer.SECOND/4,Phaser.Easing.Linear.None,!0)},this),e.time.events.add(o-Phaser.Timer.SECOND/2,function(){e.add.tween(l).to({alpha:0},Phaser.Timer.SECOND/4,Phaser.Easing.Linear.None,!0)},this),e.time.events.add(o,u,this),l}e.exports={addLabel:c,addSaiyanLabel:l,addRepeatLink:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:333,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[.5,0],a=l(e,t||e.world.centerX,n,"press ENTER to play once again",r);a.anchor.setTo(.5,0),a.fill=i,a.inputEnabled=!0,a.input.useHandCursor=!0;var u,c,f=(u=a,c=i,function(){c===i?(u.fill=c=o,u.setShadow(0,0,i,3)):c===o?(u.fill=c=i,u.setShadow(0,0,o,3)):console.warn("ignore toggling")}),p=e.state.getCurrentState(),h=Phaser.Timer.SECOND/2;return s.interval(p,h,f),a},displayGameVersion:function(e){var t=e.add.text(5,e.height-20,"v"+a.version);return t.font="Tahoma",t.fontSize="10px",t.fill="#fff",t.setShadow(0,0,o,3),t},displaySingleLineMessage:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*Phaser.Timer.SECOND;return u(e,n),f(e,{text:t,lifespan:n,fontSize:60})},displayFullscreenMessage:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*Phaser.Timer.SECOND;return u(e,n,e.height),f(e,{text:t,lifespan:n,fontSize:40})}}},function(e,t){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return parseInt(Math.random()*(t-e+1)+e,10)}function r(e,t,n){e.time.events.add(t,n,this)}e.exports={random:n,timesRandomAsync:function(e,t,o,i){var a=0,s=n(1,t-1);!function t(){r(e,o,function(){++a<s&&t(),i()})}()},interval:function(e,t,n){var r=e.time.create();r.repeat(t,1/0,n),r.start()},timeout:r,slug:function(e){return e.toLocaleLowerCase().replace(/Å«/,"u").replace(/\W/gi,"-")}}},function(e,t,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0}function o(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var i=n(12),a=Object.prototype.hasOwnProperty,s=Array.prototype.slice,u="foo"===function(){}.name;function c(e){return Object.prototype.toString.call(e)}function l(e){return!o(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var f=e.exports=b,p=/\s*function\s+([^\(\s]*)\s*/;function h(e){if(i.isFunction(e)){if(u)return e.name;var t=e.toString().match(p);return t&&t[1]}}function y(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function d(e){if(u||!i.isFunction(e))return i.inspect(e);var t=h(e);return"[Function"+(t?": "+t:"")+"]"}function g(e,t,n,r,o){throw new f.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:o})}function b(e,t){e||g(e,!0,t,"==",f.ok)}function m(e,t,n,a){if(e===t)return!0;if(o(e)&&o(t))return 0===r(e,t);if(i.isDate(e)&&i.isDate(t))return e.getTime()===t.getTime();if(i.isRegExp(e)&&i.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(l(e)&&l(t)&&c(e)===c(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(o(e)!==o(t))return!1;var u=(a=a||{actual:[],expected:[]}).actual.indexOf(e);return-1!==u&&u===a.expected.indexOf(t)||(a.actual.push(e),a.expected.push(t),function(e,t,n,r){if(null==e||null==t)return!1;if(i.isPrimitive(e)||i.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=v(e),a=v(t);if(o&&!a||!o&&a)return!1;if(o)return e=s.call(e),t=s.call(t),m(e,t,n);var u,c,l=w(e),f=w(t);if(l.length!==f.length)return!1;for(l.sort(),f.sort(),c=l.length-1;c>=0;c--)if(l[c]!==f[c])return!1;for(c=l.length-1;c>=0;c--)if(u=l[c],!m(e[u],t[u],n,r))return!1;return!0}(e,t,n,a))}return n?e===t:e==t}function v(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function O(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function _(e,t,n,r){var o;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),o=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!o&&g(o,n,"Missing expected exception"+r);var a="string"==typeof r,s=!e&&o&&!n;if((!e&&i.isError(o)&&a&&O(o,n)||s)&&g(o,n,"Got unwanted exception"+r),e&&o&&n&&!O(o,n)||!e&&o)throw o}f.AssertionError=function(e){var t;this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=y(d((t=this).actual),128)+" "+t.operator+" "+y(d(t.expected),128),this.generatedMessage=!0);var n=e.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var o=r.stack,i=h(n),a=o.indexOf("\n"+i);if(a>=0){var s=o.indexOf("\n",a+1);o=o.substring(s+1)}this.stack=o}}},i.inherits(f.AssertionError,Error),f.fail=g,f.ok=b,f.equal=function(e,t,n){e!=t&&g(e,t,n,"==",f.equal)},f.notEqual=function(e,t,n){e==t&&g(e,t,n,"!=",f.notEqual)},f.deepEqual=function(e,t,n){m(e,t,!1)||g(e,t,n,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(e,t,n){m(e,t,!0)||g(e,t,n,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(e,t,n){m(e,t,!1)&&g(e,t,n,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function e(t,n,r){m(t,n,!0)&&g(t,n,r,"notDeepStrictEqual",e)},f.strictEqual=function(e,t,n){e!==t&&g(e,t,n,"===",f.strictEqual)},f.notStrictEqual=function(e,t,n){e===t&&g(e,t,n,"!==",f.notStrictEqual)},f.throws=function(e,t,n){_(!0,e,t,n)},f.doesNotThrow=function(e,t,n){_(!1,e,t,n)},f.ifError=function(e){if(e)throw e};var w=Object.keys||function(e){var t=[];for(var n in e)a.call(e,n)&&t.push(n);return t}}).call(this,n(11))},function(e){e.exports={private:!0,name:"7balls",version:"1.3.2",author:{name:"Piotr Kowalski",email:"piecioshka@gmail.com",url:"https://piecioshka.pl/"},scripts:{clear:"rm -rf src/public/dist/","clear:all":"rm -rf node_modules/ npm-debug.log && npm run clear",deploy:"cross-env NODE_DEBUG=gh-pages gh-pages -d src/public/",watch:"webpack -w",build:"webpack --profile -p",postbuild:"node ./src/tasks/copy-phaser.js",count:"find src -name '*.js' -not -path './node_modules/*' | xargs wc -l | sort -r"},dependencies:{assert:"^1.4.1","gh-pages":"^2.0.1","lodash.isobject":"^3.0.2","lodash.isstring":"^4.0.1",phaser:"^2.6.1","super-event-emitter":"^4.1.4"},devDependencies:{"@babel/core":"^7.4.4","@babel/plugin-proposal-class-properties":"^7.4.4","@babel/preset-env":"^7.4.4","babel-loader":"^8.0.5","babel-plugin-transform-object-assign":"^6.8.0","babel-preset-es2015":"^6.18.0","babel-preset-es2016":"^6.16.0","babel-preset-stage-0":"^6.16.0","imports-loader":"^0.8.0",webpack:"^4.30.0","webpack-cli":"^3.3.1"},repository:{type:"git",url:"https://github.com/piecioshka/7balls"}}},function(e,t){var n="[object String]",r=Object.prototype.toString,o=Array.isArray;e.exports=function(e){return"string"==typeof e||!o(e)&&function(e){return!!e&&"object"==typeof e}(e)&&r.call(e)==n}},function(e,t,n){"use strict";e.exports={MAXIMUM_EXPERIENCE:100,MAXIMUM_LEVEL:100}},function(e,t,n){var r=n(1);e.exports={setup:function(e,t){function n(n,o){r.interval(e,n,function(){if(t.alive){var e=r.random(0,o.length-1);(0,o[e])()}})}n(Phaser.Timer.SECOND,[function(){r.timesRandomAsync(e,5,Phaser.Timer.SECOND/4,function(){t.events.onBoxing.dispatch()})},function(){r.timesRandomAsync(e,5,Phaser.Timer.SECOND/4,function(){t.events.onKicking.dispatch()})}]),n(Phaser.Timer.SECOND/3,[function(){r.timesRandomAsync(e,10,Phaser.Timer.SECOND/20,function(){t.events.onLeft.dispatch()})},function(){r.timesRandomAsync(e,10,Phaser.Timer.SECOND/20,function(){t.events.onRight.dispatch()})}]),n(5*Phaser.Timer.SECOND,[function(){t.events.onJumping.dispatch()}])}}},function(e,t,n){"use strict";e.exports={WIDTH:800,HEIGHT:400,RENDER_ID:"game-area"}},function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";e.exports=n(1)},function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error(t)}function o(e){return"string"==typeof e}function i(e){return"function"==typeof e}function a(){if(!(this instanceof a))return new a;this._listeners=[]}
/**
 * @author Piotr Kowalski <piecioshka@gmail.com> (https://piecioshka.pl/)
 * @name super-event-emitter
 * @description Super small (2KB) and simple interpretation of popular event management.
 * @version 4.1.6
 * @license MIT
 * @example
 * var bar = {}; // Or any other object.
 * EventEmitter.mixin(bar);
 * bar.on('foo', function () {
 *     console.log('foo event emitted');
 * });
 * bar.emit('foo');
 */var s=n(2),u={on:function(e,t,n){return r(o(e),"EventEmitter#on: name is not a string"),r(i(t),"EventEmitter#on: fn is not a function"),n=n||this,this._listeners.push({name:e,fn:t,ctx:n}),this},once:function(e,t,n){n=n||this;var r=this;return this.on(e,function o(){t.apply(n,arguments),r.off(e,o)},n),this},off:function(e,t){return this._listeners=e?function(e,t){if("filter"in Array.prototype)return e.filter(t);for(var n=[],r=0;r<e.length;r+=1){var o=e[r];t(o)&&n.push(o)}return n}(this._listeners,function(n){return n.name!==e||!!i(t)&&n.fn!==t}):[],this},emit:function(e,t){return r(o(e),"EventEmitter#emit: name is not a string"),function(e,t){if("forEach"in Array.prototype)e.forEach(t);else for(var n=0;n<e.length;n+=1)t(e[n])}(this._listeners,function(n){n.name===e&&n.fn.call(n.ctx,t),/^all|\*$/.test(n.name)&&n.fn.call(n.ctx,e,t)}),this}};u.addEventListener=u.addListener=u.bind=u.on,u.removeEventListener=u.removeListener=u.unbind=u.off,u.dispatchEventListener=u.dispatchListener=u.trigger=u.emit,a.prototype=u,a.mixin=function(e){var t=new a;for(var n in t)e[n]=t[n];return e},a.prototype.mixin=a.mixin,a.VERSION=s.version,e.exports=a},function(e,t){e.exports={name:"super-event-emitter",description:"Super small (2KB) and simple interpretation of popular event management.",version:"4.1.6",license:"MIT",author:{name:"Piotr Kowalski",email:"piecioshka@gmail.com",url:"https://piecioshka.pl/"},scripts:{build:"webpack --profile",watch:"webpack -w",test:"jasmine JASMINE_CONFIG_PATH=test/unit/jasmine.json",coverage:"istanbul cover jasmine JASMINE_CONFIG_PATH=test/unit/jasmine.json",coveralls:"npm run coverage && cat ./coverage/lcov.info | coveralls -v",version:"npm run build && git add dist/ && auto-changelog -p && git add CHANGELOG.md"},"auto-changelog":{"commit-limit":!1,template:".github/CHANGELOG_TEMPLATE.hbs"},repository:{type:"git",url:"http://github.com/piecioshka/super-event-emitter.git"},devDependencies:{"auto-changelog":"^1.4.5",coveralls:"^3.0.0",istanbul:"^0.4.4",jasmine:"^2.4.1","json-loader":"^0.5.4","string-replace-loader":"^1.0.3",webpack:"^3.10.0"},files:["dist","src","index.js","package.json","README.md"],keywords:["super","event","emitter","mixin","on","off","emit","trigger","simple"],main:"./dist/super-event-emitter.min.js"}}])},function(e,t,n){"use strict";e.exports={PLAYER_SPEED:300,MAPS_TIME_LIMIT:5}},function(e,t){e.exports=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},o=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,a=String(e).replace(o,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),u=r[n];n<i;u=r[++n])d(u)||!O(u)?a+=" "+u:a+=" "+s(u);return a},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var i,a={};function s(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),y(n)?r.showHidden=n:n&&t._extend(r,n),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,e,r.depth)}function u(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function c(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return b(o)||(o=l(e,o,r)),o}var i=function(e,t){if(m(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(g(t))return e.stylize(""+t,"number");if(y(t))return e.stylize(""+t,"boolean");if(d(t))return e.stylize("null","null")}(e,n);if(i)return i;var a=Object.keys(n),s=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),w(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(n);if(0===a.length){if(S(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(v(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return e.stylize(Date.prototype.toString.call(n),"date");if(w(n))return f(n)}var c,O="",E=!1,P=["{","}"];(h(n)&&(E=!0,P=["[","]"]),S(n))&&(O=" [Function"+(n.name?": "+n.name:"")+"]");return v(n)&&(O=" "+RegExp.prototype.toString.call(n)),_(n)&&(O=" "+Date.prototype.toUTCString.call(n)),w(n)&&(O=" "+f(n)),0!==a.length||E&&0!=n.length?r<0?v(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=E?function(e,t,n,r,o){for(var i=[],a=0,s=t.length;a<s;++a)T(t,String(a))?i.push(p(e,t,n,r,String(a),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(p(e,t,n,r,o,!0))}),i}(e,n,r,s,a):a.map(function(t){return p(e,n,r,s,t,E)}),e.seen.pop(),function(e,t,n){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,O,P)):P[0]+O+P[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,o,i){var a,s,u;if((u=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),T(r,o)||(a="["+o+"]"),s||(e.seen.indexOf(u.value)<0?(s=d(n)?l(e,u.value,null):l(e,u.value,n-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),m(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function h(e){return Array.isArray(e)}function y(e){return"boolean"==typeof e}function d(e){return null===e}function g(e){return"number"==typeof e}function b(e){return"string"==typeof e}function m(e){return void 0===e}function v(e){return O(e)&&"[object RegExp]"===E(e)}function O(e){return"object"==typeof e&&null!==e}function _(e){return O(e)&&"[object Date]"===E(e)}function w(e){return O(e)&&("[object Error]"===E(e)||e instanceof Error)}function S(e){return"function"==typeof e}function E(e){return Object.prototype.toString.call(e)}function P(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(m(i)&&(i=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!a[n])if(new RegExp("\\b"+n+"\\b","i").test(i)){var r=e.pid;a[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else a[n]=function(){};return a[n]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=y,t.isNull=d,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=b,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=m,t.isRegExp=v,t.isObject=O,t.isDate=_,t.isError=w,t.isFunction=S,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(14);var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(e=new Date,n=[P(e.getHours()),P(e.getMinutes()),P(e.getSeconds())].join(":"),[e.getDate(),j[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n(15),t._extend=function(e,t){if(!t||!O(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var k="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function x(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(k&&e[k]){var t;if("function"!=typeof(t=e[k]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,k,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise(function(e,r){t=e,n=r}),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push(function(e,r){e?n(e):t(r)});try{e.apply(this,o)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),k&&Object.defineProperty(t,k,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=k,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var o=n.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,a=function(){return o.apply(i,arguments)};t.apply(this,n).then(function(t){e.nextTick(a,null,t)},function(t){e.nextTick(x,t,a)})}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n(13))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,f=-1;function p(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&h())}function h(){if(!l){var e=s(p);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function d(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new y(e,t)),1!==c.length||l||s(h)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=d,o.addListener=d,o.once=d,o.off=d,o.removeListener=d,o.removeAllListeners=d,o.emit=d,o.prependListener=d,o.prependOnceListener=d,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";e.exports={up:0,hp:100,exp:0,lvl:1}},function(e,t,n){"use strict";e.exports={BOTTOM_MARGIN:40,HORIZONTAL_SPEED:300,JUMP:500,FALL_SPEED:12,CHARACTER_AVATAR_WIDTH:50,CHARACTER_AVATAR_HEIGHT:70,KICKING_POINTS:5,BOXING_POINTS:3}},function(e,t,n){var r=n(5),o=n(0).addSaiyanLabel;e.exports={_setupEnemyOptions:function(){var e=this.game.enemy;o(this.game,755,18,"HP"),o(this.game,755,48,"EXP"),this._addAvatar(745,85,"".concat(e.id,"-card")),this.options.enemy.lvl=o(this.game,733,81,"".concat(e.lvl," ").concat(this.game.locale.FIGHT_STATE_LEVEL_SHORT),[1,0]),this.options.enemy.hp=this._addBar(746,25,"bar-hp-invert",[1,0]),this._updateEnemyOptionsHP(),this.options.enemy.exp=this._addBar(746,55,"bar-exp-invert",[1,0]),this._updateEnemyOptionsEXP()},_updateEnemyOptionsHP:function(){var e=this.game.enemy.hp,t=this.cache.getImage("bar-hp-invert").width,n=e*t/100;this.options.enemy.hp.color.crop(new Phaser.Rectangle(t-n,0,n,16))},_updateEnemyOptionsEXP:function(){var e=this.game.enemy.exp,t=this.cache.getImage("bar-exp").width,n=e*t/100;this.options.enemy.exp.color.crop(new Phaser.Rectangle(t-n,0,n,16))},_removeEnemyHP:function(e){var t=this.game.enemy,n=t.getSprite();t.hp-=e,t.hp<=0&&(t.hp=0,n.events.onDied.dispatch()),this._updateEnemyOptionsHP(),this._updateOptionsLvL("enemy")},_addEnemyEXP:function(e){var t=this.game.enemy;t.exp+=e,t.exp>=r.MAXIMUM_EXPERIENCE&&(t.exp=0,t.lvl<r.MAXIMUM_LEVEL&&t.lvl++),this._updateEnemyOptionsEXP(),this._updateOptionsLvL("enemy")}}},function(e,t,n){var r=n(5),o=n(0).addSaiyanLabel;e.exports={_setupPlayerOptions:function(){var e=this.game.player;o(this.game,21,18,"HP"),o(this.game,8,48,"EXP"),this._addAvatar(6,85,"".concat(e.id,"-card")),this.options.player.lvl=o(this.game,63,81,"".concat(e.lvl," ").concat(this.game.locale.FIGHT_STATE_LEVEL_SHORT)),this.options.player.hp=this._addBar(55,25,"bar-hp"),this._updatePlayerOptionsHP(),this.options.player.exp=this._addBar(55,55,"bar-exp"),this._updatePlayerOptionsEXP()},_updatePlayerOptionsHP:function(){var e=this.game.player.hp*this.cache.getImage("bar-hp").width/100;this.options.player.hp.color.crop(new Phaser.Rectangle(0,0,e,16))},_updatePlayerOptionsEXP:function(){var e=this.game.player.exp*this.cache.getImage("bar-exp").width/100;this.options.player.exp.color.crop(new Phaser.Rectangle(0,0,e,16))},_removePlayerHP:function(e){var t=this.game.player,n=t.getSprite();t.hp-=e,t.hp<=0&&(t.hp=0,n.events.onDied.dispatch()),this._updatePlayerOptionsHP(),this._updateOptionsLvL("player")},_addPlayerEXP:function(e){var t=this.game.player;t.exp+=e,t.exp>=r.MAXIMUM_EXPERIENCE&&(t.exp=0,t.lvl<r.MAXIMUM_LEVEL&&t.lvl++),this._updatePlayerOptionsEXP(),this._updateOptionsLvL("player")}}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t);var s=n(8),u=function(e){function t(){var e,n,a,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,l=new Array(c),f=0;f<c;f++)l[f]=arguments[f];return a=this,n=!(u=(e=o(t)).call.apply(e,[this].concat(l)))||"object"!==r(u)&&"function"!=typeof u?i(a):u,s.mixin(i(n)),n.locale=null,n.player=null,n.enemy=null,n.enemies=null,n.balls=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,Phaser.Game),t}();function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,p(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,Phaser.State),n=t,(r=[{key:"preload",value:function(){this.load.image("pixel-loading","./assets/pixelart/loading.png")}},{key:"create",value:function(){this.game.renderer.renderSession.roundPixels=!1,this.stage.backgroundColor="#000",this.game.emit("game:bootstrap")}}])&&l(n.prototype,r),o&&l(n,o),t}();function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=n(1),_=n(0).addSaiyanLabel,w=n(0).displayGameVersion,S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,m(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,Phaser.State),n=t,(r=[{key:"preload",value:function(){_(this.game,this.world.centerX,150,"Loading...",[.5,.5]).fontSize=130;var e=this.cache.getImage("pixel-loading").width,t=this.add.sprite(this.world.centerX-e/2,230,"pixel-loading");this.load.setPreloadSprite(t),this.load.path="",this.load.tilemap("map-collecting-1","./assets/data/maps/collecting-1.json",null,Phaser.Tilemap.TILED_JSON),this.load.tilemap("map-collecting-2","./assets/data/maps/collecting-2.json",null,Phaser.Tilemap.TILED_JSON),this.load.tilemap("map-collecting-3","./assets/data/maps/collecting-3.json",null,Phaser.Tilemap.TILED_JSON),this.load.path="assets/pixelart/",this.load.image("pixel","pixel.png"),this.load.image("logo","logo/logo.png"),this.load.image("flag-pl","flags/flag-pl.png"),this.load.image("flag-usa","flags/flag-usa.png"),this.load.image("cloud","cloud.png"),this.load.image("bg-game-over","backgrounds/game-over/game-over.png"),this.load.image("bg-win","backgrounds/win/win.png"),this.load.image("bg-credits","backgrounds/credits/credits.png"),this.load.image("bg-select-player","backgrounds/select-player/select-player.png"),this.load.image("son-goku-card","posters/son-goku/son-goku-card-160x240.png"),this.load.image("vegeta-card","posters/vegeta/vegeta-card-160x240.png"),this.load.image("bubu-card","posters/bubu/bubu-card-160x240.png"),this.load.image("cell-card","posters/cell/cell-card-160x240.png"),this.load.image("freeza-card","posters/freeza/freeza-card-160x240.png"),this.load.image("piccolo-card","posters/piccolo/piccolo-card-160x240.png"),this.load.spritesheet("son-goku-fight","fight/son-goku/son-goku-spritesheet.png",150,200),this.load.spritesheet("vegeta-fight","fight/vegeta/vegeta-spritesheet.png",150,200),this.load.spritesheet("bubu-fight","fight/bubu/bubu-spritesheet.png",150,200),this.load.spritesheet("cell-fight","fight/cell/cell-spritesheet.png",150,200),this.load.spritesheet("freeza-fight","fight/freeza/freeza-spritesheet.png",150,200),this.load.spritesheet("piccolo-fight","fight/piccolo/piccolo-spritesheet.png",150,200),this.load.spritesheet("collect-spritesheet","sheets/collect-spritesheet.png",40,40),this.load.spritesheet("ball-spritesheet","sheets/ball-spritesheet.png",40,40),this.load.image("bar-blank","bars/blank.png"),this.load.image("bar-exp","bars/exp.png"),this.load.image("bar-exp-invert","bars/exp-invert.png"),this.load.image("bar-hp","bars/hp.png"),this.load.image("bar-hp-invert","bars/hp-invert.png"),this.load.path="",this.load.json("positions-1","./assets/data/balls-positions/positions-1.json"),this.load.json("positions-2","./assets/data/balls-positions/positions-2.json"),this.load.json("positions-3","./assets/data/balls-positions/positions-3.json"),this.load.json("locale-en","./assets/locale/en_EN.json"),this.load.json("locale-pl","./assets/locale/pl_PL.json"),this.load.text("font-saiyan-sans","./assets/fonts/Saiyan-Sans.ttf")}},{key:"create",value:function(){var e=this;O.timeout(this,500,function(){e.game.emit("game:loaded")}),w(this.game)}}])&&g(n.prototype,r),o&&g(n,o),t}();function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function j(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=n(9),I=n(1),D=n(0),R=D.displayFullscreenMessage,N=D.addSaiyanLabel,K=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=this,n=!(o=(e=k(t)).call.apply(e,[this].concat(a)))||"object"!==E(o)&&"function"!=typeof o?x(r):o,C(x(n),"layer",null),C(x(n),"emitter",null),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,Phaser.State),n=t,(r=[{key:"create",value:function(){var e=I.random(1,3);this._setupWorld(e),this._setupBalls(e),this._setupSprite(10,60,this.game.player),this._setupParticles(),this._setupTimer(),R(this.game,this.game.locale.COLLECT_DRAGON_BALLS)}},{key:"_setupParticles",value:function(){this.emitter=this.add.emitter(),this.emitter.makeParticles("pixel"),this.emitter.setXSpeed(-150,150),this.emitter.gravity=0}},{key:"_fireParticles",value:function(e,t){this.emitter.x=e,this.emitter.y=t,this.emitter.start(!0,600,null,15)}},{key:"_setupWorld",value:function(e){this.physics.startSystem(Phaser.Physics.ARCADE);var t=this.add.tilemap("map-collecting-".concat(e));t.addTilesetImage("collect-spritesheet"),t.setCollision([1,3]),this.layer=t.createLayer("Tile Layer 1"),this.layer.resizeWorld()}},{key:"_setupSprite",value:function(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[.5,.5];n.createSprite(this,e,t,"".concat(n.id,"-fight"));var i=n.getSprite();(r=i.anchor).setTo.apply(r,j(o)),this.physics.arcade.enable(i),i.body.collideWorldBounds=!0;var a=.8*i.width,s=.4*i.height,u=.1*i.width,c=.6*i.height;i.body.setSize(a,s,u,c),i.scale.setTo(.3,.3),i.animations.add("standing",[0,1,2],4,!0).play()}},{key:"_setupBalls",value:function(e){var t=this,n=this.game.balls=this.add.group();n.enableBody=!0,this.physics.arcade.enable(n),this.cache.getJSON("positions-".concat(e)).forEach(function(e){var r=P(e,2),o=r[0],i=r[1],a=t.add.tileSprite(40*o,40*i,40,40,"ball-spritesheet");a.animations.add("default",[0,1,2,3],4,!0).play(),n.add(a)})}},{key:"_setupTimer",value:function(){var e=this,t=L.MAPS_TIME_LIMIT,n=parseInt(Math.log2(t)),r=this.game.time.create(),o=N(this.game,10,0,"".concat(this.game.locale.TIME,": ").concat(t));o.fontSize=35,r.repeat(Phaser.Timer.SECOND,t,function(){var i=t-parseInt(r.seconds);o.setText("".concat(e.game.locale.TIME,": ").concat(i)),i===n&&(o.anchor.setTo(.5,.5),o.x=e.game.width/2,o.y=e.game.height/2,o.fill="#f00",o.fontSize=100)},this),r.onComplete.add(function(){e.game.emit("game:collect-failed")}),r.start()}},{key:"update",value:function(){this._handleCollision(),this._handleKeyboard()}},{key:"_handleCollision",value:function(){var e=this.game.player.getSprite();this.physics.arcade.collide(e,this.layer),this.physics.arcade.collide(e,this.game.balls,this._handleCollectedBall.bind(this))}},{key:"_handleCollectedBall",value:function(e,t){this._fireParticles(t.x+t.width/2,t.y+t.height/2),t.destroy(),0===this.game.balls.length&&this.game.emit("game:collect-completed")}},{key:"_handleKeyboard",value:function(){var e=this.game.player.getSprite(),t=this.input.keyboard;e.body.velocity.x=e.body.velocity.y=0,t.isDown(Phaser.Keyboard.LEFT)?e.body.velocity.x-=L.PLAYER_SPEED:t.isDown(Phaser.Keyboard.RIGHT)&&(e.body.velocity.x+=L.PLAYER_SPEED),t.isDown(Phaser.Keyboard.UP)?e.body.velocity.y-=L.PLAYER_SPEED:t.isDown(Phaser.Keyboard.DOWN)&&(e.body.velocity.y+=L.PLAYER_SPEED)}},{key:"render",value:function(){this.game.player.getSprite()}}])&&T(n.prototype,r),o&&T(n,o),t}();function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var B=n(0),X=B.addSaiyanLabel,U=B.addRepeatLink,J=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),z(this,F(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,Phaser.State),n=t,(r=[{key:"create",value:function(){this.add.image(0,0,"bg-game-over"),X(this.game,this.game.world.centerX,50,"Game Over",[.5,0]).fontSize=130,U(this.game).events.onInputDown.add(this._tryAgain,this),this._setupKeyboard()}},{key:"_setupKeyboard",value:function(){var e=this,t=this.input.keyboard.addKey(Phaser.Keyboard.ENTER);this.input.keyboard.addKeyCapture([Phaser.Keyboard.ENTER]),t.onDown.add(function(){return e._tryAgain()})}},{key:"_tryAgain",value:function(){this.game.emit("game:over:try-again",{enemy:this.game.enemy})}}])&&H(n.prototype,r),o&&H(n,o),t}();function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q=n(10),ee=n(2),te=n(1),ne=n(0).displayFullscreenMessage,re=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=this,n=!(o=(e=W(t)).call.apply(e,[this].concat(a)))||"object"!==V(o)&&"function"!=typeof o?Y(r):o,$(Y(n),"plCard",null),$(Y(n),"enCard",null),$(Y(n),"onEnter",null),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,Phaser.State),n=t,(r=[{key:"create",value:function(){this.enCard=this.add.button(150,150,"flag-usa",this._chooseEnglish,this),this.enCard.onInputOver.add(this._selectEnglish,this),this.plCard=this.add.button(450,150,"flag-pl",this._choosePolish,this),this.plCard.onInputOver.add(this._selectPolish,this),this._setupKeyboard(),this._selectEnglish()}},{key:"_choosePolish",value:function(){this._chooseLanguage("locale-pl")}},{key:"_chooseEnglish",value:function(){this._chooseLanguage("locale-en")}},{key:"_chooseLanguage",value:function(e){var t=this;this.game.locale||(this.game.locale=this.cache.getJSON(e),ee(Q(this.game.locale)),this.game.emit("locale:select",{locale:e}),ne(this.game,this.game.locale.CONTROLS_INFO),te.timeout(this,2*Phaser.Timer.SECOND,function(){t.game.emit("game:language-selected")}))}},{key:"_setupKeyboard",value:function(){var e=this,t=this.input.keyboard.addKey(Phaser.Keyboard.LEFT),n=this.input.keyboard.addKey(Phaser.Keyboard.RIGHT),r=this.input.keyboard.addKey(Phaser.Keyboard.ENTER);this.input.keyboard.addKeyCapture([Phaser.Keyboard.LEFT,Phaser.Keyboard.RIGHT,Phaser.Keyboard.ENTER]),t.onDown.add(function(){return e._selectEnglish()}),n.onDown.add(function(){return e._selectPolish()}),r.onDown.addOnce(function(){return e.onEnter()})}},{key:"_selectPolish",value:function(){this.plCard.alpha=1,this.enCard.alpha=.5,this.onEnter=this._choosePolish}},{key:"_selectEnglish",value:function(){this.plCard.alpha=.5,this.enCard.alpha=1,this.onEnter=this._chooseEnglish}}])&&q(n.prototype,r),o&&q(n,o),t}();function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),e}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ue=n(4),ce=n(1).slug,le=n(2),fe=n(16),pe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),se(this,"title",null),se(this,"nickname",null),se(this,"_phaser",null),oe(this,fe)}return ae(e,[{key:"id",get:function(){return le(ue(this.title)),ce(this.title).toLowerCase()}}]),ae(e,[{key:"createSprite",value:function(e,t,n,r){this._phaser=e.add.sprite(t,n,r)}},{key:"getSprite",value:function(){return this._phaser}},{key:"setPersonality",value:function(e){var t=new e;this.title=t.title}},{key:"resetHP",value:function(){this.hp=fe.hp}}]),e}();function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var be=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ye(this,de(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(t,pe),t}();var me=function e(t){var n=t.title;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.title=n};function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Se=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.title="Son GokÅ«",Oe(this,_e(t).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(t,me),t}();function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){return!t||"object"!==Ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ke=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.title="Vegeta",Pe(this,je(t).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,me),t}();function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ie=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.title="Piccolo",Ae(this,Ce(t).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(t,me),t}();function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Me=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.title="Freeza",Re(this,Ne(t).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(t,me),t}();function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Be=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.title="Cell",ze(this,Fe(t).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(t,me),t}();function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ve(e,t){return(Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qe=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.title="Bubu",Ue(this,Je(t).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(t,me),t}(),We=n(0);function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nt=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=this,n=!(o=(e=$e(t)).call.apply(e,[this].concat(a)))||"object"!==Ye(o)&&"function"!=typeof o?Qe(r):o,tt(Qe(n),"gokuCard",null),tt(Qe(n),"vegetaCard",null),tt(Qe(n),"cardsIndex",null),tt(Qe(n),"cards",null),tt(Qe(n),"clouds",null),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(t,Phaser.State),n=t,(r=[{key:"create",value:function(){var e=this;this.cardsIndex=0,this.cards=[],this.game.enemies=[Me,Be,qe,Ie],this.add.image(0,0,"bg-select-player"),this.clouds=this.add.group(),this.clouds.create(-50,30,"cloud"),this.clouds.create(260,10,"cloud"),this.clouds.create(480,20,"cloud"),this.gokuCard=this.add.button(200,100,"son-goku-card",function(){return e._chooseCharacter(Se)}),this.gokuCard.onInputOver.add(this._selectSonGoku,this),this.cards.push(this.gokuCard),Object(We.addSaiyanLabel)(this.game,215,350,"Son GokÅ«").fontSize=30,this.vegetaCard=this.add.button(450,100,"vegeta-card",function(){return e._chooseCharacter(ke)}),this.vegetaCard.onInputOver.add(this._selectVegeta,this),this.cards.push(this.vegetaCard),Object(We.addSaiyanLabel)(this.game,485,350,"Vegeta").fontSize=30,this._setupKeyboard(),this._selectSonGoku()}},{key:"_chooseCharacter",value:function(e){this.game.player=new be,this.game.player.setPersonality(e),this.game.emit("player:select",{player:this.game.player})}},{key:"_setupKeyboard",value:function(){var e=this,t=this.input.keyboard.addKey(Phaser.Keyboard.LEFT),n=this.input.keyboard.addKey(Phaser.Keyboard.RIGHT);this.input.keyboard.addKeyCapture([Phaser.Keyboard.LEFT,Phaser.Keyboard.RIGHT]),t.onDown.add(function(){return e._prevCard()}),n.onDown.add(function(){return e._nextCard()})}},{key:"update",value:function(){var e=this;this._handleKeyboard(),this.clouds.children.forEach(function(t,n){t.position.x+=Math.log(n+2)/5,t.position.x>e.game.world.width&&(t.position.x=-1*t.width)},this)}},{key:"_handleKeyboard",value:function(){this.input.keyboard.isDown(Phaser.Keyboard.ENTER)&&this.cards[this.cardsIndex].onInputUp.dispatch()}},{key:"_prevCard",value:function(){this.cardsIndex--,this.cardsIndex<0&&(this.cardsIndex=0),this.cards[this.cardsIndex].onInputOver.dispatch()}},{key:"_nextCard",value:function(){this.cardsIndex++,this.cardsIndex>=this.cards.length&&(this.cardsIndex=this.cards.length-1),this.cards[this.cardsIndex].onInputOver.dispatch()}},{key:"_selectSonGoku",value:function(){this.gokuCard.alpha=1,this.vegetaCard.alpha=.5}},{key:"_selectVegeta",value:function(){this.gokuCard.alpha=.5,this.vegetaCard.alpha=1}}])&&Ze(n.prototype,r),o&&Ze(n,o),t}(),rt=n(6),ot=n.n(rt);function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(e,t){return!t||"object"!==it(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function st(e){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ct=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),at(this,st(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}(t,pe),t}();function lt(e){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ft(){return(ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gt(e,t){return(gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bt=n(17),mt=n(2),vt=n(4),Ot=n(1),_t=n(0).displaySingleLineMessage,wt=n(18),St=n(19);function Et(e,t){var n=e.getSprite(),r=150,o=200;function i(){n.body.setSize(r,o,0,0)}n.animations.add("standing",[0,1,2],4,!0);var a=n.animations.add("boxing",[3,4],8,!1);a.onStart.add(i),a.onComplete.add(t),a.onComplete.add(function(){n.play("standing")});var s=n.animations.add("kicking",[6,7],8,!1);s.onStart.add(i),s.onComplete.add(t),s.onComplete.add(function(){n.play("standing")}),n.animations.add("win",[9,10,11],4,!0),n.animations.add("died",[12,13,14],4,!0).onStart.add(function(){n.angle=-90})}function Pt(e){e.body.velocity.x=0,e.body.velocity.y+=bt.FALL_SPEED}var jt=function(e){function t(){var e,n,r,o,i,a,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,c=new Array(u),l=0;l<u;l++)c[l]=arguments[l];return r=this,n=!(o=(e=yt(t)).call.apply(e,[this].concat(c)))||"object"!==lt(o)&&"function"!=typeof o?dt(r):o,i=dt(n),s={player:{hp:null,exp:null,lvl:null},enemy:{hp:null,exp:null,lvl:null}},(a="options")in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gt(e,t)}(t,Phaser.State),n=t,(r=[{key:"displayLogo",value:function(){this.add.image(this.game.width/2-this.cache.getImage("logo").width/2,5,"logo")}},{key:"_setupWorld",value:function(){this.physics.startSystem(Phaser.Physics.ARCADE),this.physics.arcade.gravity.setTo(0,1),this.world.setBounds(0,0,this.game.width,this.game.height-bt.BOTTOM_MARGIN)}},{key:"_getOrientationResetSize",value:function(e,t){var n=e.getSprite();if(t!==n.orientation)return n.orientation=t,function(){switch(t){case"left":n.body.setSize(100,200,0,0);break;case"right":n.body.setSize(100,200,50,0)}}}},{key:"_addAvatar",value:function(e,t,n){var r=this.add.image(e,t,n);r.width=bt.CHARACTER_AVATAR_WIDTH,r.height=bt.CHARACTER_AVATAR_HEIGHT}},{key:"_addBar",value:function(e,t,n){var r,o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],a=this.add.image(e,t,"bar-blank"),s=this.add.image(e,t,n);return(r=a.anchor).setTo.apply(r,pt(i)),(o=s.anchor).setTo.apply(o,pt(i)),{blank:a,color:s}}},{key:"_setupSprite",value:function(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,1];n.createSprite(this,e,t,"".concat(n.id,"-fight"));var i=n.getSprite();(r=i.anchor).setTo.apply(r,pt(o)),this.physics.arcade.enable(i),i.body.bounce.setTo(.9,.3),i.body.collideWorldBounds=!0,this._setupMoves(n)}},{key:"_setupMoves",value:function(e){var t=e.getSprite();t.events.onLeft=new Phaser.Signal,t.events.onLeft.add(function(){t.body.velocity.x-=bt.HORIZONTAL_SPEED}),t.events.onRight=new Phaser.Signal,t.events.onRight.add(function(){t.body.velocity.x+=bt.HORIZONTAL_SPEED}),t.events.onJumping=new Phaser.Signal,t.events.onJumping.add(function(){t.body.onFloor()&&(t.body.velocity.y-=bt.JUMP)}),t.events.onKicking=new Phaser.Signal,t.events.onKicking.add(function(){t.play("kicking")}),t.events.onBoxing=new Phaser.Signal,t.events.onBoxing.add(function(){t.play("boxing")}),t.events.onDied=new Phaser.Signal}},{key:"_updateOptionsLvL",value:function(e){this.options[e].lvl.setText("".concat(this.game[e].lvl," ").concat(this.game.locale.FIGHT_STATE_LEVEL_SHORT))}},{key:"_setupKeyboard",value:function(){var e=this.game.player.getSprite(),t=this.input.keyboard.addKey(Phaser.Keyboard.C),n=this.input.keyboard.addKey(Phaser.Keyboard.X),r=this.input.keyboard.addKey(Phaser.Keyboard.UP),o=this.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);this.input.keyboard.addKeyCapture([Phaser.Keyboard.C,Phaser.Keyboard.X,Phaser.Keyboard.UP,Phaser.Keyboard.SPACEBAR]),t.onDown.add(function(){return e.events.onKicking.dispatch()}),n.onDown.add(function(){return e.events.onBoxing.dispatch()}),r.onDown.add(function(){return e.events.onJumping.dispatch()}),o.onDown.add(function(){return e.events.onJumping.dispatch()})}},{key:"_setupEnemy",value:function(){this.game.enemy=new ct,this.game.enemy.setPersonality(this.game.enemies[0])}},{key:"create",value:function(){ft(this,wt,St),this.add.image(0,0,"bg-select-player"),this._setupWorld(),this._setupEnemy(),this._setupSprite(150,360,this.game.player),this._setupSprite(650,360,this.game.enemy,[1,1]),this._setupFightersActions(),this._setupPlayerOptions(),this._setupEnemyOptions(),this._setupFight(),this._setupKeyboard(),this.displayLogo(),_t(this.game,"".concat(this.game.locale.FIGHT_STATE_WELCOME))}},{key:"_setupFightersActions",value:function(){var e=this._getOrientationResetSize(this.game.player,"left");Et(this.game.player,e),e(),this.game.player.getSprite().play("standing");var t=this._getOrientationResetSize(this.game.enemy,"right");Et(this.game.enemy,t),t(),this.game.enemy.getSprite().play("standing")}},{key:"update",value:function(){var e=this.game.enemy.getSprite(),t=this.game.player.getSprite();this.physics.arcade.collide(e,t),Pt(e),Pt(t),this._handleKeyboard()}},{key:"_setupFight",value:function(){var e=this,t=this,n=this.game.player.getSprite(),r=this.game.enemy.getSprite();function o(){return t.physics.arcade.overlap(r,n)}function i(e){o()&&(t._addPlayerEXP(1.75*e),t._removeEnemyHP(e),r.body.velocity.x+=4*bt.HORIZONTAL_SPEED)}function a(e){o()&&(t._addEnemyEXP(e),t._removePlayerHP(e),n.body.velocity.x-=4*bt.HORIZONTAL_SPEED)}n.events.onKicking.add(function(){return i(bt.KICKING_POINTS)}),n.events.onBoxing.add(function(){return i(bt.BOXING_POINTS)}),n.events.onDied.add(function(){return e._finishFight("died","win")}),r.events.onKicking.add(function(){return a(bt.KICKING_POINTS)}),r.events.onBoxing.add(function(){return a(bt.BOXING_POINTS)}),r.events.onDied.add(function(){return e._finishFight("win","died")}),ot.a.setup(this,r)}},{key:"_getLocaleStatus",value:function(e){mt(vt(e));var t=e.toLowerCase(),n=new Map;n.set("win",this.game.locale.FIGHT_STATE_PLAYER_WIN),n.set("died",this.game.locale.FIGHT_STATE_PLAYER_DIED);var r=n.get(t);return mt(vt(r)),r}},{key:"_finishFight",value:function(e,t){var n=this,r=this.game.player,o=r.getSprite(),i=this.game.enemy.getSprite(),a=4*Phaser.Timer.SECOND,s="".concat(r.title," ").concat(this._getLocaleStatus(e));_t(this.game,s),this.input.keyboard.enabled=!1,o.body.velocity.setTo(0,0),i.body.velocity.setTo(0,0),o.play(e),i.play(t),o.alive=!1,i.alive=!1,Ot.timeout(this,a,function(){n.input.keyboard.enabled=!0,"died"===e?n.game.emit("game:over",{enemy:n.game.enemy}):(n.game.enemies.shift(),n.game.emit("enemy:killed",{enemy:n.game.enemy}))})}},{key:"_handleKeyboard",value:function(){var e=this.game.player.getSprite(),t=this.input.keyboard;t.isDown(Phaser.Keyboard.LEFT)?e.events.onLeft.dispatch():t.isDown(Phaser.Keyboard.RIGHT)&&e.events.onRight.dispatch()}},{key:"render",value:function(){this.game.player.getSprite();var e=this.game.enemy.getSprite();this.game.debug.body(e)}}])&&ht(n.prototype,r),o&&ht(n,o),t}();function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xt(e,t){return!t||"object"!==Tt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ct(e,t){return(Ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Lt=n(0).addSaiyanLabel,It=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xt(this,At(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ct(e,t)}(t,Phaser.State),n=t,(r=[{key:"create",value:function(){var e=this;this.add.image(0,0,"bg-win"),Lt(this.game,180,60,"Winner!").fontSize=180,setTimeout(function(){e.game.emit("game:credits")},2e3)}}])&&kt(n.prototype,r),o&&kt(n,o),t}();function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nt(e,t){return!t||"object"!==Dt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kt(e){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mt(e,t){return(Mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ht=n(0),zt=Ht.addSaiyanLabel,Ft=Ht.addLabel,Gt=Ht.addRepeatLink,Bt=n(3),Xt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Nt(this,Kt(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mt(e,t)}(t,Phaser.State),n=t,(r=[{key:"create",value:function(){this.add.image(0,0,"bg-credits"),zt(this.game,this.game.world.centerX,20,"Credits",[.5,0]).fontSize=60,Ft(this.game,this.game.world.centerX,110,"Developed by",[.5,0]).fontSize=20,Ft(this.game,this.game.world.centerX,140,"Piotr Kowalski",[.5,0]).fontSize=30,Ft(this.game,this.game.world.centerX,180,"@piecioshka",[.5,0]).fontSize=30;var e=Ft(this.game,this.game.world.centerX,260,"v".concat(Bt.version),[.5,0]);e.setShadow(0,0,null,0),e.fill="rgba(0,0,0,1)",e.fontSize=20,Gt(this.game).events.onInputDown.add(this._tryAgain,this),this._setupKeyboard()}},{key:"_setupKeyboard",value:function(){var e=this,t=this.input.keyboard.addKey(Phaser.Keyboard.ENTER);this.input.keyboard.addKeyCapture([Phaser.Keyboard.ENTER]),t.onDown.add(function(){return e._tryAgain()})}},{key:"_tryAgain",value:function(){this.game.emit("game:over:try-again",{enemy:this.game.enemy})}}])&&Rt(n.prototype,r),o&&Rt(n,o),t}();function Ut(e){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vt(e,t){return!t||"object"!==Ut(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qt(e){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wt(e,t){return(Wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Yt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Vt(this,qt(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wt(e,t)}(t,Phaser.State),n=t,(r=[{key:"create",value:function(){}}])&&Jt(n.prototype,r),o&&Jt(n,o),t}();function Zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $t=function(){function e(t){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=null,(r="game")in(n=this)?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this.game=t,this.setupStates(),this.setupNativeListeners(),this.setupListeners()}var t,n,r;return t=e,(n=[{key:"setupStates",value:function(){this.game.state.add("Bootstrap",y),this.game.state.add("Loading",S),this.game.state.add("SelectLanguage",re),this.game.state.add("SelectPlayer",nt),this.game.state.add("CollectDragonBalls",K),this.game.state.add("AvoidMonsters",Yt),this.game.state.add("Fight",jt),this.game.state.add("Winner",It),this.game.state.add("GameOver",J),this.game.state.add("Credits",Xt)}},{key:"setupNativeListeners",value:function(){this.game.state.onStateChange.add(function(e,t){console.debug("[SM] State: %s",e)})}},{key:"setupListeners",value:function(){var e=this;this.game.on("all",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.unshift("%c[SM] Event:","color: orange"),console.log.apply(console,t)}),this.game.on("game:bootstrap",function(){e.game.state.start("Loading")}),this.game.on("game:loaded",function(){e.game.state.start("SelectLanguage")});var t=function(){e.game.state.start("SelectPlayer")};this.game.on("game:language-selected",t),this.game.on("game:over:try-again",t),this.game.on("game:win:try-again",t),this.game.on("player:select",function(){e.game.state.start("CollectDragonBalls")});var n=function(){e.game.state.start("Fight")};this.game.on("game:collect-failed",n),this.game.on("game:next-enemy",n),this.game.on("enemy:killed",function(){0===e.game.enemies.length?e.game.emit("game:win"):e.game.emit("game:next-enemy")});var r=function(){e.game.state.start("Winner")};this.game.on("game:collect-completed",r),this.game.on("game:win",r),this.game.on("game:credits",function(){e.game.state.start("Credits")}),this.game.on("game:over",function(){e.game.state.start("GameOver")})}},{key:"start",value:function(){this.game.state.start("Bootstrap")}}])&&Zt(t.prototype,n),r&&Zt(t,r),e}();function Qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}"function"!=typeof ga&&(window.ga=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.unshift("[Google Analytics]")});var en=function(){function e(t){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=null,(r="game")in(n=this)?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this.game=t}var t,n,r;return t=e,(n=[{key:"start",value:function(){this.game.on("player:choose",function(e){var t=e.character;ga("send","event","game","choose-".concat(t.id))}),this.game.on("locale:select",function(e){var t=e.locale;ga("send","event","game",t)}),this.game.on("game:over",function(){ga("send","event","game","over")}),this.game.on("game:over:try-again",function(){ga("send","event","game","try-again")}),this.game.on("game:win",function(){ga("send","event","game","win")}),this.game.on("game:win:try-again",function(){ga("send","event","game","win-try-again")})}}])&&Qt(t.prototype,n),r&&Qt(t,r),e}(),tn=n(7),nn=new u(tn.WIDTH,tn.HEIGHT,Phaser.Canvas,tn.RENDER_ID);new $t(nn).start(),new en(nn).start(),window.game=nn}]);
//# sourceMappingURL=bundle.js.map